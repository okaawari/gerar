# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION BEGIN
PassengerAppRoot "/home/gerarmn/api.gerar.mn"
PassengerBaseURI "/"
PassengerNodejs "/home/gerarmn/nodevenv/api.gerar.mn/20/bin/node"
PassengerAppType node
PassengerStartupFile /home/gerarmn/api.gerar.mn/src/server.js
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION END

# DO NOT REMOVE OR MODIFY. CLOUDLINUX ENV VARS CONFIGURATION BEGIN
<IfModule Litespeed>
</IfModule>
# DO NOT REMOVE OR MODIFY. CLOUDLINUX ENV VARS CONFIGURATION END

# .htaccess for cPanel Node.js Application
# This file helps with mod_security and routing issues

# Allow HTTP methods (though we only use GET and POST in this project)
# Keeping this for compatibility but project uses POST-only pattern
<Limit GET POST OPTIONS HEAD>
    Require all granted
</Limit>

# Disable mod_security for API routes (if needed)
# Uncomment these lines if mod_security is blocking legitimate API requests
# <IfModule mod_security.c>
#     SecRuleRemoveById 300015 300016 300017
# </IfModule>

# Rewrite rules for Node.js app
# If your Node.js app is behind Apache, ensure requests reach Node.js
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Don't rewrite requests for static files that exist
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    
    # Don't rewrite error pages
    RewriteCond %{REQUEST_URI} !^/403\.shtml$
    RewriteCond %{REQUEST_URI} !^/404\.shtml$
    RewriteCond %{REQUEST_URI} !^/500\.shtml$
    
    # Proxy all other requests to Node.js app (if using proxy)
    # Uncomment if you're using Apache as reverse proxy to Node.js
    # RewriteRule ^(.*)$ http://localhost:3000/$1 [P,L]
</IfModule>

# CORS headers are handled by Node.js Express CORS middleware
# We don't set headers here to avoid conflicts with Express CORS configuration
# The Express app will handle all CORS logic including preflight OPTIONS requests
# Removing duplicate headers prevents "true, true" duplication errors

# php -- BEGIN cPanel-generated handler, do not edit
# Set the “ea-php81” package as the default “PHP” programming language.
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php81 .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit
